CREATE DATABASE StudentDB;


USE StudentDB;


CREATE TABLE Department (
    dept_id INT PRIMARY KEY,
    DeptName VARCHAR(50) NOT NULL UNIQUE,
    HOD_Name VARCHAR(50) NOT NULL
);


CREATE TABLE Student (
    RegID INT PRIMARY KEY,
    rollno INT UNIQUE NOT NULL,
    fname VARCHAR(30) NOT NULL,
    mname VARCHAR(30),
    lname VARCHAR(30) NOT NULL,
    gender CHAR(1) CHECK (gender IN ('M', 'F')),
    dept_id INT,
    FOREIGN KEY (dept_id) REFERENCES Department(dept_id)
);


CREATE TABLE Course (
    CID INT PRIMARY KEY,
    course_name VARCHAR(80) NOT NULL,
    credit INT CHECK (credit > 0)
);


CREATE TABLE Enrollment (
    enid INT PRIMARY KEY,
    RegID INT NOT NULL,
    DeptID INT NOT NULL,
    FOREIGN KEY (RegID) REFERENCES Student(RegID),
    FOREIGN KEY (DeptID) REFERENCES Department(dept_id)
);

ALTER TABLE Student
ADD email VARCHAR(80);

ALTER TABLE Course
MODIFY course_name VARCHAR(120);

RENAME TABLE Enrollment TO StudentEnrollment;

ALTER TABLE Course
RENAME COLUMN CID TO course_no;

CREATE INDEX idx_dept_id ON Student(dept_id);

